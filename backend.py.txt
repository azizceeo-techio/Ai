from flask import Flask, request, jsonify, send_from_directory
from flask_cors import CORS

app = Flask(__name__)
CORS(app)  # Allow frontend to talk to backend

# Available models (we'll expand this later)
MODELS = [
    {
        "id": "sentiment",
        "name": "Sentiment Analysis",
        "description": "Detect if text is positive or negative",
        "type": "text-to-text"
    },
    {
        "id": "summarize",
        "name": "Text Summarizer",
        "description": "Summarize long text into key points",
        "type": "text-to-text"
    },
    {
        "id": "translate",
        "name": "Translator",
        "description": "Translate text between languages",
        "type": "text-to-text"
    }
]

@app.route('/')
def home():
    return send_from_directory('.', 'index.html')

@app.route('/api/models', methods=['GET'])
def get_models():
    """Return list of available models"""
    return jsonify({"models": MODELS})

@app.route('/api/predict', methods=['POST'])
def predict():
    """Process model prediction"""
    data = request.json
    model_id = data.get('model_id')
    user_input = data.get('input')
    
    # For now, return mock responses (we'll add real AI later)
    if model_id == "sentiment":
        result = f"‚úÖ Sentiment: POSITIVE (This is a demo response for: '{user_input}')"
    elif model_id == "summarize":
        result = f"üìù Summary: This text is about... (Demo for: '{user_input[:50]}...')"
    elif model_id == "translate":
        result = f"üåç Translation: Hola mundo (Demo for: '{user_input}')"
    else:
        result = "‚ùå Model not found"
    
    return jsonify({
        "success": True,
        "model": model_id,
        "input": user_input,
        "result": result
    })

if __name__ == '__main__':
    print("üöÄ AI Model Platform API Starting...")
    print("üì° Server running on http://localhost:5000")
    app.run(debug=True, host='0.0.0.0', port=5000)